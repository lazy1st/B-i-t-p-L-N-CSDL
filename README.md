# CHÆ¯Æ NG TRÃŒNH QUáº¢N LÃ KHO VÃ€ BÃN Cá»¦A Cá»¬A HÃ€NG CÃ€ PHÃŠ HIá»€N ANH
***
**TÃ¡c Giáº£: HoÃ ng Äá»©c Thuáº§n**

**MSSV: K215480106046**

**Lá»›p: K57KMT**

**NgÃ y HoÃ n ThÃ nh: 19/6/2024**

MÃ´ táº£ bÃ i toÃ¡n quáº£n lÃ½: Cá»­a hÃ ng Hiá»n Anh lÃ  má»™t trong nhá»¯ng cá»­a hÃ ng bÃ¡n hÃ ng lá»›n vÃ  uy tÃ­n. Äá»ƒ quáº£n lÃ½ cá»­a hÃ ng lá»›n nhÆ° váº­y cáº§n sá»± quáº£n lÃ½ tháº­t tá»‘t Ä‘á»ƒ Ä‘áº£m báº£o lá»£i nhuáº­n vÃ  doanh thu. GiÃºp tá»‘i Æ°u hoÃ¡ cÃ´ng viá»‡c, giÃºp bÃ¡o cÃ¡o chÃ­nh xÃ¡c vá» tÃ¬nh hÃ¬nh kinh doanh. BÃ i táº­p nÃ y sáº½ sá»­ dá»¥ng ngÃ´n ngá»¯ SQL Ä‘á»ƒ quáº£n lÃ½ kho nháº­p - xuáº¥t sáº£n pháº©m vÃ  viá»‡c bÃ¡n hÃ ng cá»§a cá»§a hÃ ng.
### Nhá»¯ng chá»©c nÄƒng xÃ¢y dá»±ng Ä‘á»ƒ quáº£n lÃ½ kho vÃ  bÃ¡n hÃ ng:<p>
1.	Quáº£n lÃ½ sáº£n pháº©m<p>
  â€¢	ThÃªm, sá»­a Ä‘á»•i, xoÃ¡ sáº£n pháº©m<p>
  â€¢	TÃ¬m kiáº¿n, lá»c sáº£n pháº©m theo cÃ¡c tiÃªu chÃ­ cá»§a ngÆ°á»i dÃ¹ng<p>
  â€¢	Xem thÃ´ng tin chi tiáº¿t tá»«ng sáº£n pháº©m<p>
  â€¢	Xem sá»‘ lÆ°á»£ng tá»“n kho cá»§a má»—i sáº£n pháº©m<p>
2.	Quáº£n lÃ½ kho<p>
  â€¢	Khi bÃ¡n sáº£n pháº©m hoáº·c nháº­p thÃªm nguyÃªn liá»‡u cáº­p nháº­t sá»‘ lÆ°á»£ng hÃ ng cÃ²n láº¡i trong kho.<p>
  â€¢	Xem sá»‘ lÆ°á»£ng vÃ  thá»‘ng kÃª sáº£n nguyÃªn liá»‡u hÃ ng tá»“n kho<p>
Nháº­p xuáº¥t vÃ  bÃ¡o cÃ¡o cÃ¡c thÃ´ng tin liÃªn quan Ä‘áº¿n kho vÃ  viá»‡c bÃ¡n hÃ ng<p>
1.	Nháº­p hÃ ng:<p>
  â€¢	Quáº£n lÃ½ viá»‡c nháº­p hÃ ng tá»« nhÃ  cung cáº¥p vÃ o kho hÃ ng.<p>
  â€¢	Ghi nháº­n thÃ´ng tin vá» sáº£n pháº©m, sá»‘ lÆ°á»£ng, giÃ¡ cáº£ vÃ  nhÃ  cung cáº¥p.<p>
  â€¢	Cáº­p nháº­t láº¡i sá»‘ hÃ ng tá»“n kho sau má»—i láº§n bÃ¡n hoáº·c nháº­p hÃ ng vá».<p>
  â€¢	Theo dÃµi Ä‘Æ¡n hÃ ng tá»« nhÃ  cung cáº¥p vÃ  xÃ¡c nháº­n quáº£n lÃ½ khi hÃ ng Ä‘Ã£ vÃ o kho.<p>
2.	Xuáº¥t hÃ ng:<p>
  â€¢	Quáº£n lÃ½ viá»‡c xuáº¥t cÃ¡c máº·t hÃ ng tá»« kho hÃ ng Ä‘á»ƒ bÃ¡n cho khÃ¡ch hÃ ng.<p>
  â€¢	Ghi nháº­n thÃ´ng tin vá» sáº£n pháº©m, sá»‘ lÆ°á»£ng, giÃ¡ cáº£ vÃ  thÃ´ng tin khÃ¡ch hÃ ng.<p>
  â€¢	Cáº­p nháº­t tá»“n kho sau má»—i láº§n xuáº¥t hÃ ng.<p>
  â€¢	Theo dÃµi Ä‘Æ¡n hÃ ng vÃ  xÃ¡c nháº­n khi Ä‘Ã£ Ä‘Æ°á»£c giao.<p>
3.	BÃ¡o cÃ¡o<p>
  â€¢	BÃ¡o cÃ¡o vá» doanh thu theo ngÃ y, doanh thu theo thÃ¡ng,... giÃºp quáº£n lÃ½ Ä‘Æ°á»£c lá»£i nhuáº­n.<p>
  â€¢	Táº¡o vÃ  xem bÃ¡o cÃ¡o hoáº¡t Ä‘á»™ng kinh doanh cá»§a cá»­a hÃ ng, sá»‘ lÆ°á»£ng hÃ ng tá»“n kho nhiá»u nháº¥t, sá»‘ lÆ°á»£ng hÃ ng bÃ¡n cháº¡y nháº¥t,....<p>
1.	Sáº£n pháº©m sáº½ quáº£n lÃ½ nhá»¯ng thÃ´ng tin nhÆ°: ğŸ”‘MÃ£ sáº£n pháº©m, tÃªn sáº£n pháº©m, thÃ´ng tin, giÃ¡, sá»‘ lÆ°á»£ng cÃ²n láº¡i, mÃ´ táº£.<p>
2.	KhÃ¡ch hÃ ng: ğŸ”‘MÃ£ khÃ¡ch hÃ ng, tÃªn khÃ¡ch hÃ ng, sá»‘ Ä‘iá»‡n thoáº¡i, Ä‘á»‹a chá»‰, loáº¡i khÃ¡ch hÃ ng.<p>
3.	ÄÆ¡n hÃ ng: ğŸ”‘MÃ£ Ä‘Æ¡n hÃ ng, mÃ£ khÃ¡ch hÃ ng, ngÃ y bÃ¡n hÃ ng, tá»•ng tiá»n, mÃ£ sáº£n pháº©m, sá»‘ lÆ°á»£ng, giÃ¡, ghi chÃº.<p>
4.	NhÃ  cung cáº¥p: ğŸ”‘MÃ£ nhÃ  cung cáº¥p, tÃªn nhÃ  cung cáº¥p, sá»‘ Ä‘iá»‡n thoáº¡i nhÃ  cung cáº¥p, tÃªn ngÆ°á»i liÃªn há»‡, sá»‘ Ä‘iá»‡n thoáº¡i ngÆ°á»i liÃªn há»‡, Ä‘á»‹a chá»‰.<p>
5.	Danh má»¥c: ğŸ”‘MÃ£ danh má»¥c, tÃªn danh má»¥c, ghi chÃº.<p>
6.	Giao Dá»‹ch kho: ğŸ”‘MÃ£ giao dá»‹ch, mÃ£ sáº£n pháº©m, sá»‘ lÆ°á»£ng, ngÃ y nháº­p kho, ngÃ y xuáº¥t kho.<p>
NhÆ° váº­y, dá»±a theo nhá»¯ng thÃ´ng tin mÃ  ta Ä‘Ã£ thu tháº­p Ä‘Æ°á»£c chÃºng ta sáº½ xÃ¢y dá»±ng cÃ¡c báº£ng Ä‘Ã¡p á»©ng yÃªu cáº§u quáº£n lÃ½ cá»§a cá»§a hÃ ng.
---
### Táº¡o cÃ¡c báº£ng nhÆ° mÃ´ táº£ trong SQL Sever:<p>
1.Báº£ng Sáº£n Pháº©m<p>
![image](https://github.com/lazy1st/B-i-t-p-L-N-CSDL/assets/166302644/e5740186-0416-4e70-96da-0527f341431f)


ChÃº thÃ­ch cho tá»«ng giÃ¡ trá»‹ trong báº£ng SanPham:<p>
    â€¢	MaSanPham: MÃ£ Ä‘á»‹nh danh duy nháº¥t cho má»—i sáº£n pháº©m, sá»­ dá»¥ng lÃ m khÃ³a chÃ­nh Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh duy nháº¥t.<p>
    â€¢	TenSanPham: TÃªn cá»§a sáº£n pháº©m, lÃ  má»™t chuá»—i kÃ½ tá»± cÃ³ Ä‘á»™ dÃ i tá»‘i Ä‘a 255 kÃ½ tá»± vÃ  báº¯t buá»™c pháº£i cÃ³ giÃ¡ trá»‹.<p>
    â€¢	ThongTin: CÃ¡c thÃ´ng tin chung vá» sáº£n pháº©m, thÆ°á»ng lÃ  mÃ´ táº£ ngáº¯n gá»n hoáº·c thÃ´ng tin ká»¹ thuáº­t.<p>
    â€¢	Gia: GiÃ¡ bÃ¡n cá»§a sáº£n pháº©m, Ä‘Æ°á»£c Ä‘á»‹nh dáº¡ng dÆ°á»›i dáº¡ng sá»‘ tháº­p phÃ¢n vá»›i tá»‘i Ä‘a 10 chá»¯ sá»‘ trong Ä‘Ã³ cÃ³ 2 chá»¯ sá»‘ sau dáº¥u tháº­p phÃ¢n.<p>
    â€¢	SoLuongConLai: Sá»‘ lÆ°á»£ng sáº£n pháº©m cÃ²n láº¡i trong kho, lÃ  má»™t sá»‘ nguyÃªn vÃ  báº¯t buá»™c pháº£i cÃ³ giÃ¡ trá»‹.<p>
    â€¢	MoTa: MÃ´ táº£ chi tiáº¿t hÆ¡n vá» sáº£n pháº©m, cÃ³ thá»ƒ bao gá»“m cÃ¡c thÃ´ng tin nhÆ° Ä‘áº·c Ä‘iá»ƒm, cÃ´ng dá»¥ng, hÆ°á»›ng dáº«n sá»­ dá»¥ng, v.v.<p>
2.Báº£ng KhÃ¡ch HÃ ng<p>
	![image](https://github.com/lazy1st/B-i-t-p-L-N-CSDL/assets/166302644/98b27901-face-4708-a700-49fdb1b714c3)
 
ChÃº thÃ­ch cho tá»«ng giÃ¡ trá»‹ trong báº£ng KhachHang:<p>
  â€¢	MaKhachHang: MÃ£ Ä‘á»‹nh danh duy nháº¥t cho má»—i khÃ¡ch hÃ ng, sá»­ dá»¥ng lÃ m khÃ³a chÃ­nh Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh duy nháº¥t.<p>
  â€¢	TenKhachHang: TÃªn cá»§a khÃ¡ch hÃ ng, lÃ  má»™t chuá»—i kÃ½ tá»± cÃ³ Ä‘á»™ dÃ i tá»‘i Ä‘a 255 kÃ½ tá»± vÃ  báº¯t buá»™c pháº£i cÃ³ giÃ¡ trá»‹.<p>
  â€¢	SoDienThoai: Sá»‘ Ä‘iá»‡n thoáº¡i cá»§a khÃ¡ch hÃ ng, lÃ  má»™t chuá»—i kÃ½ tá»± cÃ³ Ä‘á»™ dÃ i tá»‘i Ä‘a 15 kÃ½ tá»± vÃ  báº¯t buá»™c pháº£i cÃ³ giÃ¡ trá»‹. ÄÃ¢y lÃ  thÃ´ng tin liÃªn láº¡c quan trá»ng.<p>
  â€¢	DiaChi: Äá»‹a chá»‰ cá»§a khÃ¡ch hÃ ng, lÃ  má»™t chuá»—i kÃ½ tá»± cÃ³ Ä‘á»™ dÃ i tá»‘i Ä‘a 255 kÃ½ tá»± vÃ  báº¯t buá»™c pháº£i cÃ³ giÃ¡ trá»‹.<p>
  â€¢	LoaiKhachHang: Loáº¡i khÃ¡ch hÃ ng, lÃ  má»™t chuá»—i kÃ½ tá»± cÃ³ Ä‘á»™ dÃ i tá»‘i Ä‘a 50 kÃ½ tá»±, dÃ¹ng Ä‘á»ƒ phÃ¢n loáº¡i khÃ¡ch hÃ ng theo cÃ¡c nhÃ³m khÃ¡c nhau nhÆ° khÃ¡ch hÃ ng thÆ°á»ng, khÃ¡ch hÃ ng VIP, v.v. ÄÃ¢y lÃ  má»™t trÆ°á»ng tÃ¹y chá»n, khÃ´ng báº¯t buá»™c pháº£i cÃ³ giÃ¡ trá»‹.<p>
2.báº£ng ÄÆ¡n hÃ ng<p>
 ![image](https://github.com/lazy1st/B-i-t-p-L-N-CSDL/assets/166302644/d96a65e6-9bea-4884-88b8-887db3c5abe2)

ChÃº thÃ­ch cho tá»«ng giÃ¡ trá»‹ trong báº£ng DonHang:<p>
    â€¢	MaDonHang: MÃ£ Ä‘á»‹nh danh duy nháº¥t cho má»—i Ä‘Æ¡n hÃ ng, sá»­ dá»¥ng lÃ m khÃ³a chÃ­nh Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh duy nháº¥t.<p>
    â€¢	MaKhachHang: MÃ£ Ä‘á»‹nh danh cá»§a khÃ¡ch hÃ ng, liÃªn káº¿t vá»›i báº£ng KhachHang Ä‘á»ƒ xÃ¡c Ä‘á»‹nh khÃ¡ch hÃ ng Ä‘Ã£ Ä‘áº·t hÃ ng. ÄÃ¢y lÃ  má»™t khÃ³a ngoáº¡i.<p>
    â€¢	NgayBanHang: NgÃ y bÃ¡n hÃ ng, lÃ  má»™t giÃ¡ trá»‹ ngÃ y thÃ¡ng Ä‘á»ƒ xÃ¡c Ä‘á»‹nh ngÃ y Ä‘Æ¡n hÃ ng Ä‘Æ°á»£c táº¡o ra, báº¯t buá»™c pháº£i cÃ³ giÃ¡ trá»‹.<p>
    â€¢	TongTien: Tá»•ng sá»‘ tiá»n cá»§a Ä‘Æ¡n hÃ ng, Ä‘Æ°á»£c Ä‘á»‹nh dáº¡ng dÆ°á»›i dáº¡ng sá»‘ tháº­p phÃ¢n vá»›i tá»‘i Ä‘a 10 chá»¯ sá»‘, trong Ä‘Ã³ cÃ³ 2 chá»¯ sá»‘ sau dáº¥u tháº­p phÃ¢n.<p>
    â€¢	MaSanPham: MÃ£ Ä‘á»‹nh danh cá»§a sáº£n pháº©m, liÃªn káº¿t vá»›i báº£ng SanPham Ä‘á»ƒ xÃ¡c Ä‘á»‹nh sáº£n pháº©m trong Ä‘Æ¡n hÃ ng. ÄÃ¢y lÃ  má»™t khÃ³a ngoáº¡i.<p>
    â€¢	SoLuong: Sá»‘ lÆ°á»£ng sáº£n pháº©m trong Ä‘Æ¡n hÃ ng, lÃ  má»™t sá»‘ nguyÃªn vÃ  báº¯t buá»™c pháº£i cÃ³ giÃ¡ trá»‹.<p>
    â€¢	Gia: GiÃ¡ cá»§a sáº£n pháº©m trong Ä‘Æ¡n hÃ ng, Ä‘Æ°á»£c Ä‘á»‹nh dáº¡ng dÆ°á»›i dáº¡ng sá»‘ tháº­p phÃ¢n vá»›i tá»‘i Ä‘a 10 chá»¯ sá»‘, trong Ä‘Ã³ cÃ³ 2 chá»¯ sá»‘ sau dáº¥u tháº­p phÃ¢n.<p>
    â€¢	GhiChu: CÃ¡c ghi chÃº bá»• sung vá» Ä‘Æ¡n hÃ ng, cÃ³ thá»ƒ chá»©a cÃ¡c thÃ´ng tin thÃªm nhÆ° yÃªu cáº§u Ä‘áº·c biá»‡t, ghi chÃº vá» giao hÃ ng, v.v.<p>
    â€¢	CÃ¡c khÃ³a ngoáº¡i: FOREIGN KEY (MaKhachHang) REFERENCES KhachHang(MaKhachHang) vÃ  FOREIGN KEY (MaSanPham) REFERENCES SanPham(MaSanPham) Ä‘áº£m báº£o ráº±ng mÃ£ khÃ¡ch hÃ ng vÃ  mÃ£ sáº£n pháº©m trong Ä‘Æ¡n hÃ ng pháº£i tá»“n táº¡i trong báº£ng KhachHang vÃ  SanPham tÆ°Æ¡ng á»©ng.<p>
â€ƒ
4.NhÃ  Cung Cáº¥p<p>	
![image](https://github.com/lazy1st/B-i-t-p-L-N-CSDL/assets/166302644/ccf03f69-78d1-4883-bc11-fb4255e5d7c6)
	 
ChÃº thÃ­ch cho tá»«ng giÃ¡ trá»‹ trong báº£ng NhaCungCap:<p>
  â€¢	MaNhaCungCap: MÃ£ Ä‘á»‹nh danh duy nháº¥t cho má»—i nhÃ  cung cáº¥p, sá»­ dá»¥ng lÃ m khÃ³a chÃ­nh Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh duy nháº¥t.<p>
  â€¢	TenNhaCungCap: TÃªn cá»§a nhÃ  cung cáº¥p, lÃ  má»™t chuá»—i kÃ½ tá»± cÃ³ Ä‘á»™ dÃ i tá»‘i Ä‘a 255 kÃ½ tá»± vÃ  báº¯t buá»™c pháº£i cÃ³ giÃ¡ trá»‹.<p>
  â€¢	SoDienThoaiNhaCungCap: Sá»‘ Ä‘iá»‡n thoáº¡i cá»§a nhÃ  cung cáº¥p, lÃ  má»™t chuá»—i kÃ½ tá»± cÃ³ Ä‘á»™ dÃ i tá»‘i Ä‘a 15 kÃ½ tá»± vÃ  báº¯t buá»™c pháº£i cÃ³ giÃ¡ trá»‹.<p>
  â€¢	TenNguoiLienHe: TÃªn cá»§a ngÆ°á»i liÃªn há»‡ táº¡i nhÃ  cung cáº¥p, lÃ  má»™t chuá»—i kÃ½ tá»± cÃ³ Ä‘á»™ dÃ i tá»‘i Ä‘a 255 kÃ½ tá»± vÃ  báº¯t buá»™c pháº£i cÃ³ giÃ¡ trá»‹.<p>
  â€¢	SoDienThoaiNguoiLienHe: Sá»‘ Ä‘iá»‡n thoáº¡i cá»§a ngÆ°á»i liÃªn há»‡ táº¡i nhÃ  cung cáº¥p, lÃ  má»™t chuá»—i kÃ½ tá»± cÃ³ Ä‘á»™ dÃ i tá»‘i Ä‘a 15 kÃ½ tá»± vÃ  báº¯t buá»™c pháº£i cÃ³ giÃ¡ trá»‹.<p>
  â€¢	DiaChi: Äá»‹a chá»‰ cá»§a nhÃ  cung cáº¥p, lÃ  má»™t chuá»—i kÃ½ tá»± cÃ³ Ä‘á»™ dÃ i tá»‘i Ä‘a 255 kÃ½ tá»± vÃ  báº¯t buá»™c pháº£i cÃ³ giÃ¡ trá»‹.<p>
5.báº£ng Danh Má»¥c sáº£n pháº©m<p>
	 ![image](https://github.com/lazy1st/B-i-t-p-L-N-CSDL/assets/166302644/3c082c6b-1868-49de-865b-f2db32e81ff6)

ChÃº thÃ­ch cho tá»«ng giÃ¡ trá»‹ trong báº£ng DanhMuc:<p>
  â€¢	MaDanhMuc: MÃ£ Ä‘á»‹nh danh duy nháº¥t cho má»—i danh má»¥c, sá»­ dá»¥ng lÃ m khÃ³a chÃ­nh Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh duy nháº¥t.<p>
  â€¢	TenDanhMuc: TÃªn cá»§a danh má»¥c, lÃ  má»™t chuá»—i kÃ½ tá»± cÃ³ Ä‘á»™ dÃ i tá»‘i Ä‘a 255 kÃ½ tá»± vÃ  báº¯t buá»™c pháº£i cÃ³ giÃ¡ trá»‹.<p>
  â€¢	GhiChu: CÃ¡c ghi chÃº bá»• sung vá» danh má»¥c, cÃ³ thá»ƒ chá»©a cÃ¡c thÃ´ng tin thÃªm nhÆ° mÃ´ táº£ chi tiáº¿t, má»¥c Ä‘Ã­ch sá»­ dá»¥ng, v.v. ÄÃ¢y lÃ  má»™t trÆ°á»ng tÃ¹y chá»n vÃ  cÃ³ thá»ƒ Ä‘á»ƒ trá»‘ng.<p> â€ƒ
6.báº£ng giao dá»‹ch kho :<p>
	 ![image](https://github.com/lazy1st/B-i-t-p-L-N-CSDL/assets/166302644/662476e3-d28d-4313-ba32-8a964cad7437)

ChÃº thÃ­ch cho tá»«ng giÃ¡ trá»‹ trong báº£ng GiaoDichKho:<p>
  â€¢	MaGiaoDich: MÃ£ Ä‘á»‹nh danh duy nháº¥t cho má»—i giao dá»‹ch kho, sá»­ dá»¥ng lÃ m khÃ³a chÃ­nh Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh duy nháº¥t.<p>
  â€¢	MaSanPham: MÃ£ Ä‘á»‹nh danh cá»§a sáº£n pháº©m, liÃªn káº¿t vá»›i báº£ng SanPham Ä‘á»ƒ xÃ¡c Ä‘á»‹nh sáº£n pháº©m trong giao dá»‹ch kho. ÄÃ¢y lÃ  má»™t khÃ³a ngoáº¡i.<p>
  â€¢	SoLuong: Sá»‘ lÆ°á»£ng sáº£n pháº©m trong giao dá»‹ch kho, lÃ  má»™t sá»‘ nguyÃªn vÃ  báº¯t buá»™c pháº£i cÃ³ giÃ¡ trá»‹.<p>
  â€¢	NgayNhapKho: NgÃ y sáº£n pháº©m Ä‘Æ°á»£c nháº­p vÃ o kho, lÃ  má»™t giÃ¡ trá»‹ ngÃ y thÃ¡ng. ÄÃ¢y lÃ  trÆ°á»ng tÃ¹y chá»n vÃ  cÃ³ thá»ƒ Ä‘á»ƒ trá»‘ng náº¿u giao dá»‹ch chá»‰ lÃ  xuáº¥t kho.<p>
  â€¢	NgayXuatKho: NgÃ y sáº£n pháº©m Ä‘Æ°á»£c xuáº¥t khá»i kho, lÃ  má»™t giÃ¡ trá»‹ ngÃ y thÃ¡ng. ÄÃ¢y lÃ  trÆ°á»ng tÃ¹y chá»n vÃ  cÃ³ thá»ƒ Ä‘á»ƒ trá»‘ng náº¿u giao dá»‹ch chá»‰ lÃ  nháº­p kho.<p>
  â€¢	KhÃ³a ngoáº¡i FOREIGN KEY (MaSanPham) REFERENCES SanPham(MaSanPham) Ä‘áº£m báº£o ráº±ng mÃ£ sáº£n pháº©m trong giao dá»‹ch kho pháº£i tá»“n táº¡i trong báº£ng SanPham.<p>		
Táº¡o sÆ¡ Ä‘á»“ thá»±c thá»ƒ liÃªn káº¿t giá»¯a cÃ¡c báº£ng :<p>
 ![image](https://github.com/lazy1st/B-i-t-p-L-N-CSDL/assets/166302644/2adaade6-72aa-4298-88f2-a553c0258e60)


ThÃªm dá»¯ liá»‡u vÃ o cÃ¡c báº£ng<p>
1.	Dá»¯ liá»‡u thÃªm vÃ o báº£ng SanPham<p>
<code>-- ChÃ¨n dá»¯ liá»‡u vÃ o báº£ng Danh má»¥c sáº£n pháº©m
INSERT INTO DanhMucSanPham (MaDanhMuc, TenDanhMuc, GhiChu)
VALUES
    '('muc1', 'CÃ  PhÃª Äen', ''),
    ('muc2', 'CÃ  PhÃª Sá»¯a', ''),
    ('muc3', 'CÃ  PhÃª Phin', ''),
    ('muc4', 'CÃ  PhÃª Capuchino', ''),
    ('muc5', 'CÃ  PhÃª Trá»©ng', '');


2.ChÃ¨n dá»¯ liá»‡u vÃ o báº£ng Sáº£n pháº©m

<code>INSERT INTO SanPham (MaSanPham, TenSanPham, Gia, MoTa, MaDanhMuc)
VALUES
    ('M01', 'CÃ  PhÃª Äen',  15000,'CÃ  PhÃª Äen', 'muc1'),
    ('M02', 'CÃ  PhÃª Sá»¯a' , 20000, 'CÃ  PhÃª Sá»¯a', 'muc1'),
    ('M03', 'CÃ  PhÃª Phin' , 15000, 'CÃ  PhÃª Phin' , 'muc2'),
    ('M04', 'CÃ  PhÃª Capuchino' , 20000,'CÃ  PhÃª Capuchino' , 'muc3'),
    ('M05', 'CÃ  PhÃª Trá»©ng' , 25000,'CÃ  PhÃª Trá»©ng' , 'muc4');

3.ChÃ¨n dá»¯ liá»‡u vÃ o báº£ng KhÃ¡ch hÃ ng

<code>INSERT INTO KhachHang (MaKhachHang, TenKhachHang, SoDienThoai, DiaChi, LoaiKhachHang)
VALUES
    ('KH001', 'Nguyen Van A', '0912345678', '123 Le Loi, TP.HCM', 'VIPP'),
    ('KH002', 'Tran Thi B', '0987654321', '456 Hai Ba Trung, Ha Noi', 'VIP'),
    ('KH003', 'Le Van C', '0909123456', '789 Nguyen Trai, Da Nang', 'New'),
    ('KH004', 'Pham Thi D', '0934567890', '321 Tran Hung Dao, Can Tho', 'VIPP'),
    ('KH005', 'Hoang Van E', '0976543210', '654 Le Duan, Hue', 'VIP');
4.ChÃ¨n dá»¯ liá»‡u vÃ o báº£ng ÄÆ¡n HÃ ng
<code>INSERT INTO DonHang (MaDonHang, MaKhachHang, NgayBanHang, TongTien, MaSanPham, SoLuong, Gia, GhiChu)
VALUES
    ('DH001', 'KH001', '2024-06-19', 30000, 'M01', 2, 15000, 'Uá»‘ng láº¡nh'),
    ('DH002', 'KH002', '2024-06-20', 40000, 'M02', 2, 20000, 'Uá»‘ng nÃ³ng'),
    ('DH003', 'KH003', '2024-06-21', 30000, 'M03', 2, 15000, 'KhÃ´ng Ä‘Ã¡'),
    ('DH004', 'KH004', '2024-06-22', 40000, 'M04', 2, 20000, 'Mang Ä‘i'),
    ('DH005', 'KH005', '2024-06-23', 50000, 'M05', 2, 25000, '');

5.ChÃ¨n dá»¯ liá»‡u vÃ o báº£ng Nha Cung Cáº¥p
<code>INSERT INTO NhaCungCap (MaNhaCungCap, TenNhaCungCap, SoDienThoaiNhaCungCap, TenNguoiLienHe, SoDienThoaiNguoiLienHe, DiaChi)
VALUES
    ('NCC01', 'NhÃ  Cung Cáº¥p PhÃºc Long', '0903456789', 'Nguyá»…n VÄƒn Long', '0912345678', '12 Tráº§n HÆ°ng Äáº¡o, HoÃ n Kiáº¿m, HÃ  Ná»™i'),
    ('NCC02', 'NhÃ  Cung Cáº¥p Trung NguyÃªn', '0909876543', 'Tráº§n Thá»‹ Trung', '0918765432', '34 LÃ½ ThÃ¡i Tá»•, HoÃ n Kiáº¿m, HÃ  Ná»™i'),
    ('NCC03', 'NhÃ  Cung Cáº¥p Highland', '0901122334', 'LÃª VÄƒn Cao', '0911122334', '56 Hai BÃ  TrÆ°ng, HoÃ n Kiáº¿m, HÃ  Ná»™i'),
    ('NCC04', 'NhÃ  Cung Cáº¥p Starbucks', '0902233445', 'Pháº¡m Thá»‹ Hoa', '0912233445', '78 BÃ  Triá»‡u, Hai BÃ  TrÆ°ng, HÃ  Ná»™i'),
    ('NCC05', 'NhÃ  Cung Cáº¥p Coffee House', '0903344556', 'HoÃ ng Minh', '0913344556', '90 Äinh TiÃªn HoÃ ng, HoÃ n Kiáº¿m, HÃ  Ná»™i');

6.ChÃ¨n dá»¯ liá»‡u vÃ o báº£ng giao dá»‹ch Kho
	<code>INSERT INTO GiaoDichKho (MaGiaoDich, MaSanPham, SoLuong, NgayNhapKho, NgayXuatKho, MaNhaCungCap)
VALUES
    ('GD01', 'M01', 100, '2024-06-19', NULL, 'NCC01'),
    ('GD02', 'M02', 150, '2024-06-18', NULL, 'NCC02'),
    ('GD03', 'M03', 120, '2024-06-17', NULL, 'NCC03'),
    ('GD04', 'M04', 80, '2024-06-16', NULL, 'NCC04'),
    ('GD05', 'M05', 200, '2024-06-15', NULL, 'NCC05');
7.Kiá»ƒm tra dá»¯ liá»‡u trong cÃ¡c báº£ng Ä‘Ã£ táº¡o
<code>  SELECT * FROM DanhMucSanPham;
![image](https://github.com/lazy1st/B-i-t-p-L-N-CSDL/assets/166302644/b94f0c9b-ba04-4a38-987a-e42d530b1f09)

 <code> SELECT * FROM SanPham;
 
 <code> SELECT * FROM KhachHang;
 
 <code> SELECT * FROM DonHang;
 
 <code> SELECT * FROM NhaCungCap;
 
 <code> SELECT * FROM GiaoDichKho;
 
XÃ‚Y Dá»°NG CÃC THá»¦ Tá»¤C THEO CÃC CHá»¨C NÄ‚NG MONG MUá»N
YÃªu cáº§u
1.	Quáº£n lÃ½ viá»‡c bÃ¡n hÃ ng
â€¢	ThÃªm, sá»­a, xoÃ¡ sáº£n pháº©m
â€¢	TÃ¬m kiáº¿m sáº£n pháº©m, lá»c sáº£n pháº©m theo cÃ¡c tiÃªu chÃ­ cá»§a ngÆ°á»i quáº£n lÃ½ hoáº·c cá»§a khÃ¡ch hÃ ng
â€¢	Xem thÃ´ng tin chá»‰ tiáº¿t má»—i sáº£n pháº©m
â€¢	Doanh thu cá»§a má»™t ngÃ y, má»™t thÃ¡ng,...
â€¢	Sá»‘ lÆ°á»£ng sáº£n pháº©m bÃ¡n cháº¡y nháº¥t.
2.	Quáº£n lÃ½ kho
â€¢	Thá»‘ng kÃª sá»‘ lÆ°á»£ng hÃ ng trong kho
â€¢	BÃ¡o cÃ¡o tÃ¬nh tráº¡ng hÃ ng trong kho, sá»‘ hÃ ng tá»“n, sá»‘ hÃ ng Ä‘Ã£ háº¿t chÆ°a nháº­p vá».
XÃ¢y dá»±ng
 
-- thÃªm sáº£n pháº©m
CREATE PROCEDURE themsanpham
    @MaSanPham NVARCHAR(255),
	@TenSanPham NVARCHAR(250),
    @Gia DECIMAL(10, 2),
    @MoTa NVARCHAR(50),
	@MaDanhMuc NVARCHAR(50)
 AS
BEGIN
    SET NOCOUNT ON;

    -- Kiá»ƒm tra xem sáº£n pháº©m cÃ³ tá»“n táº¡i hay khÃ´ng trÆ°á»›c khi chÃ¨n
    IF NOT EXISTS (SELECT 1 FROM SanPham WHERE TenSanPham = @TenSanPham)
    BEGIN
        INSERT INTO SanPham (MaSanPham,TenSanPham, Gia ,MoTa, MaDanhMuc )
        VALUES (@MaSanPham,@TenSanPham ,@Gia ,@MoTa,@MaDanhMuc);
        SELECT 'ThÃªm sáº£n pháº©m thÃ nh cÃ´ng' AS [Result];
    END
    ELSE
    BEGIN
        SELECT 'TÃªn sáº£n pháº©m Ä‘Ã£ tá»“n táº¡i. KhÃ´ng thá»ƒ thÃªm sáº£n pháº©m.' AS [Result];
    END
END;
GO
--thÃªm sáº£n pháº©m 
EXEC themsanpham
    @MaSanPham = 'M06',
    @TenSanPham = N'CÃ  PhÃª Sá»¯a ÄÃ¡',
    @Gia = 35000,
    @MoTa = N'CÃ  phÃª sá»¯a Ä‘Ã¡ thÆ¡m ngon',
    @MaDanhMuc = 'muc4';



 

CREATE PROCEDURE XoaSanPham
    @MaSanPham NVARCHAR(50)
AS
BEGIN
    SET NOCOUNT ON;

    -- Kiá»ƒm tra sáº£n pháº©m cÃ³ tá»“n táº¡i trong báº£ng SanPham khÃ´ng
    IF EXISTS (SELECT 1 FROM SanPham WHERE MaSanPham = @MaSanPham)
    BEGIN
        -- XÃ³a cÃ¡c báº£n ghi liÃªn quan trong báº£ng DonHang trÆ°á»›c (náº¿u cáº§n)
        DELETE FROM DonHang WHERE MaSanPham = @MaSanPham;

        -- XÃ³a cÃ¡c báº£n ghi liÃªn quan trong báº£ng GiaoDichKho trÆ°á»›c (náº¿u cáº§n)
        DELETE FROM GiaoDichKho WHERE MaSanPham = @MaSanPham;

        -- XÃ³a sáº£n pháº©m khá»i báº£ng SanPham
        DELETE FROM SanPham WHERE MaSanPham = @MaSanPham;

        SELECT 'XÃ³a sáº£n pháº©m thÃ nh cÃ´ng' AS [Result];
    END
    ELSE
    BEGIN
        SELECT 'Sáº£n pháº©m khÃ´ng tá»“n táº¡i. KhÃ´ng thá»ƒ xÃ³a sáº£n pháº©m.' AS [Result];
    END
END;
GO

EXEC XoaSanPham @MaSanPham = 'M01';
 
CREATE PROCEDURE CapNhatSanPham
    @MaSanPham NVARCHAR(50),
    @TenSanPham NVARCHAR(255) = NULL,
    @Gia DECIMAL(10, 2) = NULL,
    @MoTa NVARCHAR(50) = NULL,
    @MaDanhMuc NVARCHAR(50) = NULL
AS
BEGIN
    SET NOCOUNT ON;

    -- Kiá»ƒm tra sáº£n pháº©m cÃ³ tá»“n táº¡i trong báº£ng SanPham khÃ´ng
    IF EXISTS (SELECT 1 FROM SanPham WHERE MaSanPham = @MaSanPham)
    BEGIN
        -- Cáº­p nháº­t thÃ´ng tin sáº£n pháº©m
        UPDATE SanPham
        SET 
            TenSanPham = ISNULL(@TenSanPham, TenSanPham),
            Gia = ISNULL(@Gia, Gia),
            MoTa = ISNULL(@MoTa, MoTa),
            MaDanhMuc = ISNULL(@MaDanhMuc, MaDanhMuc)
        WHERE MaSanPham = @MaSanPham;

        SELECT 'Cáº­p nháº­t sáº£n pháº©m thÃ nh cÃ´ng' AS [Result];
    END
    ELSE
    BEGIN
        SELECT 'Sáº£n pháº©m khÃ´ng tá»“n táº¡i. KhÃ´ng thá»ƒ cáº­p nháº­t sáº£n pháº©m.' AS [Result];
    END
END;
GO


EXEC CapNhatSanPham 
    @MaSanPham = 'M01',
    @TenSanPham = N'CÃ  PhÃª Äen ÄÃ¡',
    @Gia = 16000,
    @MoTa = N'CÃ  PhÃª Äen ÄÃ¡',
    @MaDanhMuc = 'muc1';
-- tÃ¬m kiáº¿m sáº£n pháº©m 
 
CREATE PROCEDURE TimKiemSanPham
    @MaSanPham NVARCHAR(50) = NULL,
    @TenSanPham NVARCHAR(255) = NULL,
    @MaDanhMuc NVARCHAR(50) = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT MaSanPham, TenSanPham, Gia, MoTa, MaDanhMuc
    FROM SanPham
    WHERE 
        (@MaSanPham IS NULL OR MaSanPham = @MaSanPham) AND
        (@TenSanPham IS NULL OR TenSanPham LIKE '%' + @TenSanPham + '%') AND
        (@MaDanhMuc IS NULL OR MaDanhMuc = @MaDanhMuc);
END;
GO
EXEC TimKiemSanPham @MaSanPham = 'M01';
 
TÃ­nh tá»•ng doanh thu cá»§a ngÃ y Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh
USE BTLSQL;
GO

CREATE PROCEDURE TinhDoanhThuNgay
    @NgayBanHang DATE
AS
BEGIN
    SET NOCOUNT ON;

    -- HÃ m TÃ­nh tá»•ng doanh thu cá»§a ngÃ y Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh
    SELECT SUM(TongTien) AS DoanhThu
    FROM DonHang
    WHERE NgayBanHang = @NgayBanHang;
END;
GO 
EXEC TinhDoanhThuNgay @NgayBanHang = '2024-06-21'; 
 
-- Sáº£n pháº©m bÃ¡n cháº¡y nháº¥t thÃ¡ng

CREATE PROCEDURE SanPhamBanChayNhatoTrongThang
    @Thang INT,
    @Nam INT
AS
BEGIN
    SET NOCOUNT ON; -- Táº¯t thÃ´ng bÃ¡o sá»‘ báº£n ghi bá»‹ áº£nh hÆ°á»Ÿng

    -- Khai bÃ¡o biáº¿n Ä‘á»ƒ lÆ°u ngÃ y báº¯t Ä‘áº§u vÃ  ngÃ y káº¿t thÃºc cá»§a thÃ¡ng cáº§n thá»‘ng kÃª
    DECLARE @StartDate DATE, @EndDate DATE;
    SET @StartDate = DATEFROMPARTS(@Nam, @Thang, 1); -- NgÃ y Ä‘áº§u tiÃªn cá»§a thÃ¡ng
    SET @EndDate = DATEADD(DAY, -1, DATEADD(MONTH, 1, @StartDate)); -- NgÃ y cuá»‘i cÃ¹ng cá»§a thÃ¡ng

    -- Sá»­ dá»¥ng CTE Ä‘á»ƒ tÃ­nh tá»•ng sá»‘ lÆ°á»£ng sáº£n pháº©m bÃ¡n ra vÃ  láº¥y sáº£n pháº©m bÃ¡n cháº¡y nháº¥t
    WITH BanChayNhat AS (
        SELECT TOP 1
            DH.MaSanPham,
            SUM(DH.SoLuong) AS TongSoLuongBan 
        FROM DonHang DH
        WHERE DH.NgayBanHang >= @StartDate AND DH.NgayBanHang <= @EndDate -- Äiá»u kiá»‡n: ÄÆ¡n hÃ ng trong thÃ¡ng
        GROUP BY DH.MaSanPham 
        ORDER BY SUM(DH.SoLuong) DESC -- Sáº¯p xáº¿p giáº£m dáº§n theo tá»•ng sá»‘ lÆ°á»£ng bÃ¡n
    )
    -- Truy váº¥n Ä‘á»ƒ láº¥y thÃ´ng tin chi tiáº¿t cá»§a sáº£n pháº©m bÃ¡n cháº¡y nháº¥t
    SELECT 
        BC.MaSanPham, 
        SP.TenSanPham, 
        SP.Gia, 
        SP.MoTa,
        BC.TongSoLuongBan 
    FROM BanChayNhat BC
    INNER JOIN SanPham SP ON BC.MaSanPham = SP.MaSanPham; -- LiÃªn káº¿t vá»›i báº£ng SanPham Ä‘á»ƒ láº¥y thÃ´ng tin chi tiáº¿t
END;
GO 
 
- Táº¡o stored procedure ThongKeSoLuongHangTrongKho
CREATE PROCEDURE ThongKeSoLuongHangTrongKho
AS
BEGIN
    SET NOCOUNT ON;

    SELECT 
        SP.MaSanPham,
        SP.TenSanPham,
        ISNULL(SUM(GDK.SoLuong), 0) AS TongSoLuongTon
    FROM 
        SanPham SP
    LEFT JOIN 
        GiaoDichKho GDK ON SP.MaSanPham = GDK.MaSanPham
    GROUP BY 
        SP.MaSanPham, SP.TenSanPham
    ORDER BY 
        SP.TenSanPham;
END;
GO

-- Táº¡o trigger Ä‘á»ƒ cáº­p nháº­t sá»‘ lÆ°á»£ng tá»“n kho khi cÃ³ thay Ä‘á»•i trong báº£ng GiaoDichKho
CREATE TRIGGER trg_UpdateInventory
ON GiaoDichKho
AFTER INSERT, UPDATE, DELETE
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @MaSanPham INT;

    -- Con trá» Ä‘á»ƒ xá»­ lÃ½ cÃ¡c báº£n ghi bá»‹ áº£nh hÆ°á»Ÿng
    DECLARE cur CURSOR FOR
    SELECT DISTINCT MaSanPham FROM (
        SELECT MaSanPham FROM inserted
        UNION
        SELECT MaSanPham FROM deleted
    ) AS affected;

    OPEN cur;

    FETCH NEXT FROM cur INTO @MaSanPham;

    WHILE @@FETCH_STATUS = 0
    BEGIN
        -- Cáº­p nháº­t sá»‘ lÆ°á»£ng tá»“n kho cho sáº£n pháº©m hiá»‡n táº¡i
        UPDATE SanPham
        SET TongSoLuongTon = 
            (SELECT ISNULL(SUM(GDK.SoLuong), 0)
             FROM GiaoDichKho GDK
             WHERE GDK.MaSanPham = @MaSanPham)
        WHERE MaSanPham = @MaSanPham;

        FETCH NEXT FROM cur INTO @MaSanPham;
    END;

    CLOSE cur;
    DEALLOCATE cur;
END;
 
